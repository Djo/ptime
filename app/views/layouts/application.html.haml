!!! 5

%html
  %head
    %title PanterControlling
    = stylesheet_link_tag :all
    = javascript_include_tag :defaults, "jquery-ui", "jquery.ui.timepicker"
    = csrf_meta_tag
    %meta{'charset' => 'utf-8'}/
    %meta{"http-equiv"=>"Content-Type", :content=>"text/html; charset=utf-8"}/

  %body
    %nav
      %ul
        %li
          = section_link('Projects', :controller => 'projects', :action => 'index')
        %li
          = section_link('Entry', :controller => 'entries', :action => 'new')
        %li
          = section_link('Report', :controller => 'report', :action => 'index')
        - if current_user.try(:admin?)
          %li 
            = section_link('Admin', :controller => 'admin', :action => 'index')
      
    #container
      #user_nav
        - if user_signed_in?
          Welcome, 
          = link_to current_user.username, user_path(current_user),
            :id=>'edit_current_user'
          = link_to "Log out", destroy_user_session_path
        - else
          = link_to "Log in", new_user_session_path

      -# FIXME: Formtastic builds an ordered hash into alert. Can alert be
      -# handled in a more generic way?
      - begin
        - if flash.alert.full_messages
          %ul#flash_alert
            - flash.alert.full_messages.each do |msg|
              %li
                = msg
      - rescue
        - flash.each do |name, msg|
          = content_tag :div, msg, :id => "flash_#{name}"

      = yield
